<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secure Login Page</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
/* =========================
   RESET + BASE
========================= */
* { box-sizing: border-box; }
body, html {
  margin: 0; padding: 0; height: 100%;
  font-family: "Segoe UI", sans-serif;
  display: flex; justify-content: center; align-items: center;
  color: white;
}
body, html {
  background:
    radial-gradient(circle at 20% 20%, #a0a0ff, transparent 40%),
    radial-gradient(circle at 80% 80%, #ff9ad8, transparent 40%),
    linear-gradient(135deg, #1a1a3a, #453d7a, #343454); /* brighter colors */
  background-size: 200% 200%;
}

/* =========================
   LOGIN BOX
========================= */
.container { width: 100%; max-width: 500px; padding: 0 20px; }
.login-box {
    width: 450px;         /* bigger width */
  padding: 50px 40px;   /* more padding for a spacious look */
  border-radius: 20px;  /* slightly bigger rounded corners */
  background: rgba(255,255,255,0.12); backdrop-filter: blur(15px);
  display: flex; flex-direction: column; align-items: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
  position: relative;
}
/* SOFT AMBIENT GLOW (simplified) */
.login-box::before {
  content: "";
  position: absolute;
  inset: -10px;
  border-radius: inherit;
  background: radial-gradient(circle at top, rgba(157,252,255,0.25), transparent 50%);
  filter: blur(12px);
  opacity: 0.7;
  z-index: -1;
}

/* SUBTLE LIGHT SWEEP (kept the hover effect) */
.login-box::after {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(120deg, transparent 20%, rgba(255,255,255,0.12), transparent 80%);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.6s;
}

/* Updated button gradients for simpler color palette */
/* All buttons */
.login-box button {
  width: 100%;
  padding: 15px;
  border-radius: 12px;
  border: none;
  font-size: 16px;
  letter-spacing: 0.08em;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: transform 0.3s, box-shadow 0.3s;
}

/* Normal login button gradient */
.login-box button#loginBtn {
  background: linear-gradient(135deg, #7f7cff, #5f5cff);
  box-shadow: 0 16px 32px rgba(0,0,0,0.45), inset 0 0 16px rgba(255,255,255,0.12);
}

/* Change password button gradient */
#changePassBtn {
  background: linear-gradient(135deg, #ff8ad8, #ff5fcf);
}

/* Forgot password button gradient */
#forgotPassBtn {
  background: linear-gradient(135deg, #5fd1ff, #3caaff);
  margin-top: 10px;
  box-shadow: 0 12px 28px rgba(0,0,0,0.35), inset 0 0 12px rgba(255,255,255,0.1);
}

/* Button hover effect */
.login-box button:hover {
  transform: translateY(-4px);
}

/* Button shine effect (keep as before) */
.login-box button::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(120deg, transparent, rgba(255,255,255,0.35), transparent);
  transform: translateX(-120%);
  transition: transform 0.6s;
}

.login-box button:hover::before {
  transform: translateX(120%);
}


.input-container input {
  color: #f5f5f5;
}

#message {
  color: #ffcccc;
}

/* Forgot password link */
.forgot-link {
  margin-top: 10px;
  font-size: 14px;
  cursor: pointer;
  color: #9dfcff;
  text-decoration: underline;
  text-align: center;
}

.login-box h2 { margin-bottom: 25px; font-size: 1.6rem; text-transform: uppercase; }

/* INPUTS */
.input-container { position: relative; width: 100%; margin-bottom: 18px; }
.input-container input {
  width: 100%; padding: 14px 40px 14px 14px;
  border-radius: 10px; border: 1px solid rgba(255,255,255,0.3);
  background: rgba(0,0,0,0.35); color: white; outline: none;
}
.input-container input::placeholder { color: rgba(255,255,255,0.6); }
.input-container input:focus { border-color: #9dfcff; }

/* PASSWORD TOGGLE */
.toggle-password {
  position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
  cursor: pointer; color: rgba(255,255,255,0.7);
}

/* BUTTONS */
.login-box button {
  width: 100%; padding: 14px; border-radius: 10px; border: none;
  background: linear-gradient(135deg, #7f7cff, #5f5cff);
  color: white; font-size: 15px; margin-top: 10px; cursor: pointer;
}
#changePassBtn { background: linear-gradient(135deg, #ff8ad8, #ff5fcf); }

/* LINKS & MESSAGES */
#message { margin-top: 12px; font-size: 14px; text-align: center; color: #ffb3b3; }
.forgot-link { margin-top: 8px; font-size: 14px; cursor: pointer; color: #9dfcff; text-decoration: underline; }

</style>
</head>
<body>

<div class="container">
  <div class="login-box">
    <h2 id="loginTitle">Login</h2>

    <div class="input-container" id="usernameContainer">
      <input type="text" id="username" placeholder="Username">
    </div>

    <div class="input-container">
      <input type="password" id="password" placeholder="Password">
      <span class="toggle-password" onclick="togglePassword()"><i class="fa-solid fa-eye"></i></span>
    </div>

    <button onclick="login()">Login</button>
    <button id="changePassBtn" onclick="changePassword()">Change Password</button>
    <!-- Add this inside your .login-box div -->
    <button id="forgotPassBtn" onclick="forgotPassword()">Forgot Password</button>



    <p id="message"></p>
  </div>
</div>

<script>
let storedUser = localStorage.getItem("loginUser");
let storedPass = localStorage.getItem("loginPass");
let attempts = 0;

window.onload = function(){
    if(storedUser){
        document.getElementById("usernameContainer").style.display = "none";
        document.getElementById("loginTitle").innerText = "Welcome, " + storedUser;
    } else {
        document.getElementById("loginTitle").innerText = "Set Your Username & Password";
    }
}

function togglePassword() {
    const passInput = document.getElementById("password");
    const icon = document.querySelector(".toggle-password i");
    if(passInput.type === "password") {
        passInput.type = "text";
        icon.classList.replace("fa-eye", "fa-eye-slash");
    } else {
        passInput.type = "password";
        icon.classList.replace("fa-eye-slash", "fa-eye");
    }
}

function login() {
    const userInput = document.getElementById("username").value.trim();
    const passInput = document.getElementById("password").value.trim();

    // First-time setup
if(!storedUser && !storedPass){
    const userInput = prompt("Set username:");
    const passInput = prompt("Set password:");
    if(!userInput || !passInput) return;

    // Generate a secure random recovery token
    const recoveryToken = Math.random().toString(36).slice(2, 10).toUpperCase(); 
    alert("Save this recovery code safely! You will need it to reset your password: " + recoveryToken);

    localStorage.setItem("loginUser", userInput);
    localStorage.setItem("loginPass", passInput);
    localStorage.setItem("recoveryToken", recoveryToken);
    window.location.href = "at.html";
}

    // Normal login
    if(passInput === storedPass){
        attempts = 0;
        window.location.href = "at.html";
    } else {
        attempts++;
        document.getElementById("message").innerText = "Invalid password!";
        if(attempts >= 3){
            document.getElementById("password").disabled = true;
        }
    }
}


function changePassword() {
    if (!storedUser) {
        document.getElementById("message").innerText = "Set username and password first!";
        return;
    }

    const current = prompt("Enter CURRENT password:");
    if (current === null) return;
    if (current !== storedPass) {
        document.getElementById("message").innerText = "Current password is incorrect!";
        return;
    }

    const newPass = prompt("Enter NEW password:");
    if (!newPass || newPass.trim() === "") {
        document.getElementById("message").innerText = "New password cannot be empty!";
        return;
    }

    const confirmPass = prompt("Confirm NEW password:");
    if (newPass !== confirmPass) {
        document.getElementById("message").innerText = "Passwords do not match!";
        return;
    }

    localStorage.setItem("loginPass", newPass.trim());
    storedPass = newPass.trim();
    document.getElementById("message").style.color = "lightgreen";
    document.getElementById("message").innerText = "Password changed successfully!";
}
function isStrongPassword(password) {
    return /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$/.test(password);
}

function forgotPassword() {
    const storedToken = localStorage.getItem("recoveryToken");
    if(!storedToken){
        alert("No recovery code found. You cannot reset the password.");
        return;
    }

    const inputToken = prompt("Enter your recovery code (shown during setup):");
    if(inputToken !== storedToken){
        alert("Recovery code incorrect. Cannot reset password!");
        return;
    }

    // New password
    const newPass = prompt("Enter new password (strong recommended):");
    if(!newPass || newPass.trim().length < 8){
        alert("Password too short!");
        return;
    }

    const confirmPass = prompt("Confirm new password:");
    if(newPass !== confirmPass){
        alert("Passwords do not match!");
        return;
    }

    localStorage.setItem("loginPass", newPass.trim());
    alert("Password reset successfully!");
}

</script>

</body>
</html>
