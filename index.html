<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Student Attendance</title>
<style>
/* =====================
   RESET & VARIABLES
===================== */
:root{
    --primary:#667eea;
    --secondary:#764ba2;
    --success:#43e97b;
    --danger:#eb1559;
    --warning:#ffcc00;
    --dark:#333;
    --light:#ffffff;
}

*{
    box-sizing:border-box;
    margin:0;
    padding:0;
}

html, body {
    overflow-x: hidden; /* eliminates right-side gap */
    width: 100%;
}

* {
    max-width: 100%;
}

/* =====================
   BODY & GENERAL
===================== */
body {
    font-family: "Segoe UI", Tahoma, sans-serif;
    background: linear-gradient(135deg, var(--primary), var(--secondary));
    min-height:100vh;
    color:var(--dark);
    padding:15px;
    padding-bottom: 90px;
}

h1 {
    text-align:center;
    color: #ffffff;
    text-shadow:
        0 0 5px black,
        0 0 10px #292323,
        0 0 20px darkgray;
    padding:20px 10px;
    font-size:clamp(24px, 4vw, 36px);
    letter-spacing:1px;
}

/* =====================
   CONTAINER
===================== */
.container {
    max-width:1000px;
    margin:auto;
    background:rgba(255,255,255,0.95);
    backdrop-filter: blur(8px);
    border-radius:18px;
    padding:25px;
    box-shadow:0 15px 35px rgba(0,0,0,0.25);
    animation:fadeIn 0.6s ease-in-out;
    overflow: visible;
}

@keyframes fadeIn{
    from{opacity:0; transform:translateY(20px);}
    to{opacity:1; transform:translateY(0);}
}

/* =====================
   INPUTS & BUTTONS
===================== */
.input-box {
    text-align:center;
    margin-bottom:25px;
    display:flex;
    flex-wrap:wrap;
    justify-content:center;
    gap:10px;
}

/* Larger input sizes on all screens */
input[type="text"],
input[type="number"],
input[type="date"] {
    padding: 16px 18px;
    border-radius: 10px;
    border: 2px solid #ddd;
    font-size: 17px;
    width: 100%;
    max-width: 100%;
    transition: 0.3s;
}

/* Extra spacing on phones for better tapping */
@media (max-width: 600px) {
    input[type="text"],
    input[type="number"],
    input[type="date"] {
        padding: 18px 20px;
        font-size: 18px;
    }
}

input:focus {
    border-color:var(--primary);
    box-shadow:0 0 10px rgba(102,126,234,0.4);
    outline:none;
}

/* =====================
   BUTTON SYSTEM
===================== */
/* Menu hidden by default, black background */
.btn-group {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    justify-content: center;
    position: relative; /* for absolute menu positioning */
}

.btn-group .context-menu {
    position: absolute;
    top: 100%;
    right: 0;
    display: none;
    flex-direction: column;
    background: rgb(0, 0, 0, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 10px;
    padding: 8px;
    min-width: 160px;
    z-index: 9999;
    box-shadow: var(--shadow-lg);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.btn-group .context-menu div {
    padding: 10px;
    color: white;
    cursor: pointer;
    border-radius: 6px;
    font-size: 14px;
    transition: 0.3s;
}

.btn-group .context-menu div:hover {
    background: rgba(255, 255, 255, 0.15);
    transform: translateX(5px);
}

.menu-btn {
    font-size: 25px;
    margin-left: 10px;
    cursor: pointer;
    transition: var(--transition);
    border-radius: 50%;
    width: 30px;
    height: 40px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.menu-btn:hover {
    transform: scale(1.2);
    background: rgba(191, 194, 205, 0.3);
}





button {
    position:relative;
    padding:12px 22px;
    border:none;
    border-radius:14px;
    cursor:pointer;
    font-weight:600;
    font-size:15px;
    min-width:120px;
    transition:all 0.35s ease;
    box-shadow:0 8px 20px rgba(0,0,0,0.25);
    overflow:hidden;
}

button::before{
    content:"";
    position:absolute;
    inset:0;
    background:rgba(255,255,255,0.25);
    opacity:0;
    transition:0.3s;
}

button:hover::before{
    opacity:1;
}

button:hover{
    transform:translateY(-3px) scale(1.05);
    box-shadow:0 15px 30px rgba(0,0,0,0.35);
}

button:active{
    transform:scale(0.96);
}

.add-btn{
    background:linear-gradient(135deg,#00f2fe,#4facfe,#43e97b);
    color:#003;
}
.add-btn:hover{
    transform: translateY(-5px);
}
.present-btn{
    background:linear-gradient(135deg,#11998e,#38ef7d);
    color:white;
}

.absent-btn{
    background:linear-gradient(135deg,#ff0844,#ffb199);
    color:white;
}

.delete-btn{
    background:linear-gradient(135deg,#f00000,#ffcc00);
    color:white;
}

button:focus{
    outline:none;
    box-shadow:0 0 0 3px rgba(102,126,234,0.5),
               0 10px 25px rgba(0,0,0,0.35);
}

/* =====================
   TABLE STYLING
===================== */
.table-wrapper {
    width: 100%;
    overflow-x: auto;
}

table {
    width: 100%;
    border-collapse: collapse;
    table-layout: auto;
    min-width: unset !important;
}

th {
    background: linear-gradient(to right,var(--primary),var(--secondary));
    color:white;
    padding:14px;
    font-size:15px;
    text-transform:uppercase;
}

td {
    padding:12px;
    text-align:center;
    font-size:14px;
}

tr:nth-child(even) { background:#f6f7ff; }
tr:hover { background:#eef1ff; }

/* STATUS */
.present { color:#2e7d32; font-weight:bold; }
.absent { color:#c62828; font-weight:bold; }

/* =====================
   CONTEXT MENU
===================== */



/* =====================
   RESPONSIVE FIXES
===================== */

/* Small phones & tablets */
@media (max-width: 900px){
    th, td {
        font-size: 13px;
        padding: 8px;
    }

    button {
        font-size: 13px;
        padding: 8px 12px;
    }
}

/* Phones */
@media (max-width: 600px){
    .input-box {
        flex-direction: column;
        gap: 8px;
    }
    input[type="text"],
    input[type="number"],
    input[type="date"] {
        width: 100%;
        padding: 10px;
        font-size: 15px;
    }
    input[type="date"] {
        margin-right:20px;
    }
    .btn-group {
        flex-direction: column;
        gap: 8px;
    }
    .btn-group button {
        width: 100%;
        padding: 10px 0;
        font-size: 15px;
        border-radius: 8px;
        min-width: unset;
    }

    .add-btn {
        font-size: 18px;
        padding: 12px 0;
        width: 100%;
        max-width: 100%;
        min-width: unset;
    }

    .context-menu div {
        padding: 8px 10px;
        font-size: 13px;
    }

    th, td {
        font-size: 12px;
        padding: 6px;
    }
}

/* Very small phones */
@media (max-width: 480px) {
    th, td {
        font-size: 11px;
        padding: 5px;
    }
    button {
        font-size: 12px;
        padding: 6px 8px;
    }
}

/* =====================
   FOOTER
===================== */
.main-footer {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-top: 1px solid rgba(255, 255, 255, 0.2);
    padding: 20px 0;
    margin-top: 40px;
    width: 100%;
    position: relative;
    bottom: 0;
    left:0;
    z-index: -1;
}

.footer-content {
    max-width: 1000px;
    margin: 0 auto;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    color: white;
    font-size: 14px;
}

.footer-brand {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 600;
    letter-spacing: 0.5px;
}

.footer-status {
    display: flex;
    align-items: center;
    gap: 8px;
    opacity: 0.8;
}

.status-indicator {
    width: 8px;
    height: 8px;
    background: #43e97b; /* Success green */
    border-radius: 50%;
    box-shadow: 0 0 8px #43e97b;
    animation: pulse 2s infinite;
}

.footer-nav {
    display: flex;
    gap: 20px;
}

.footer-nav a {
    color: white;
    text-decoration: none;
    opacity: 0.7;
    transition: 0.3s;
}

.footer-nav a:hover {
    opacity: 1;
    text-shadow: 0 0 10px rgba(255,255,255,0.5);
}

.menu-btn{
    font-size: 25px;
    margin-left: 10px;
    cursor: pointer;
    transition: 400ms;
    border-radius: 100%;
    width: 30px;
    height: 40px;
}
.menu-btn:hover{
    scale:1.2;
    background: #bfc2cd;
}
@media (max-width: 600px) {
    .context-menu {
        min-width: 180px !important;
    }
    .context-menu div {
        padding: 12px 14px !important;
        font-size: 15px !important;
    }
}
/* =====================
   EXPORT / IMPORT BUTTONS
===================== */

.export-btn{
    background: linear-gradient(135deg, #36d1dc, #5b86e5);
    color: white;
}

.import-btn{
    background: linear-gradient(135deg, #f7971e, #ffd200);
    color: #333;
}

/* Common behavior (inherits your button base styles) */
.export-btn,
.import-btn{
    font-weight: 600;
    border-radius: 14px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

/* Hover effects */
.export-btn:hover,
.import-btn:hover{
    transform: translateY(-3px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.35);
}

/* Focus ring */
.export-btn:focus,
.import-btn:focus{
    outline: none;
    box-shadow: 0 0 0 3px rgba(102,126,234,0.5),
                0 10px 25px rgba(0,0,0,0.35);
}

/* Mobile full-width buttons */
@media (max-width: 600px){
    .export-btn,
    .import-btn,
    .total-present-btn{
        width: 100%;
        font-size: 15px;
        padding: 12px 0;
        border-radius: 10px;
    }
}
.total-present-btn {
    background: linear-gradient(135deg, #a8e063, #56ab2f);
    color: white;
    font-weight: 600;
    border-radius: 14px;
    padding: 12px 22px;
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(0,0,0,0.25);
    transition: all 0.35s ease;
}

.total-present-btn:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.35);
}

.btn-icon{
    width: 18px;
    height: 18px;
    margin-right: 8px;
    stroke: currentColor;
    fill: none;
    stroke-width: 2;
    stroke-linecap: round;
    stroke-linejoin: round;
    vertical-align: middle;
}
/* Modern Toolbar Styling */
.toolbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 15px;
    margin-bottom: 20px;
    background: var(--glass);
    backdrop-filter: blur(10px);
    padding: 15px;
    border-radius: 12px;
    width: 100%;
    border: 1px solid rgba(255, 255, 255, 0.2);
}

.toolbar input[type="text"] {
    flex: 1;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.3);
}

.toolbar input[type="text"]:focus {
    background: white;
    border-color: var(--primary);
}

/* Glassmorphism Table */
.container {
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
}

/* Status Badges */
.present, .absent {
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 12px;
    text-transform: uppercase;
    margin-bottom: 10px;
}
.present { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
.absent { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }

/* Stats Bar */
.stats-bar {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}
.stat-card {
    background: white;
    padding: 15px 25px;
    border-radius: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    text-align: center;
    flex: 1;
}
.stat-card span { font-size: 24px; font-weight: bold; color: var(--primary); }

.footer-info {
    flex: 1;
    text-align: center;
    padding: 0 30px;
    opacity: 0.9;
}

.footer-info p {
    margin: 0;
    font-size: 13px;
    line-height: 1.4;
    color: rgba(255, 255, 255, 0.85);
}

.footer-info strong {
    color: #43e97b; /* The accent color for emphasis */
}
/* Navigation Container */
.navigation-area {
    margin: 30px 0;
    text-align: center;
}

/* The Dashboard Button */
.dashboard-btn {
    display: inline-flex;
    align-items: center;
    justify-content: space-between;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    text-decoration: none;
    padding: 18px 30px;
    border-radius: 15px;
    font-weight: 600;
    min-width: 320px;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 10px 20px rgba(118, 75, 162, 0.3);
}

.btn-content {
    display: flex;
    align-items: center;
    gap: 15px;
}

.dashboard-btn i {
    font-size: 1.2rem;
}

.arrow-icon {
    transition: transform 0.3s ease;
}

/* Hover Effects */
.dashboard-btn:hover {
    transform: translateY(-5px) scale(1.02);
    box-shadow: 0 15px 30px rgba(118, 75, 162, 0.5);
    background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
}

.dashboard-btn:hover .arrow-icon {
    transform: translateX(8px);
}

/* Subscriber Count Fix Styling */
#subCount {
    transition: all 0.5s ease;
    display: inline-block;
}
.context-menu i {
    margin-right: 5px;
    width: 16px;
    text-align: center;
}

</style>
</head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<body>

<h1>ðŸ“‹ Student Attendance Register</h1>
<div class="navigation-area">
    <a href="at.html" class="dashboard-btn">
        <div class="btn-content">
            <i class="fa-solid fa-gauge-high"></i>
            <span>Go to Attendance Dashboard</span>
        </div>
        <i class="fa-solid fa-arrow-right-long arrow-icon"></i>
    </a>
</div>
<div class="container">

<div class="input-box">
    <input type="date" id="attendanceDate" placeholder="Select Date">
    <input type="number" id="rollNo" placeholder="Index Or Roll Number">
    <input type="text" id="studentName" placeholder="Student Name">
<div class="toolbar">
    <input type="text" id="searchStudent" placeholder="ðŸ” Search Name or Roll..." onkeyup="filterStudents()">
</div>
<button class="add-btn" onclick="addStudent()">
    <i class="fa-solid fa-circle-plus btn-icon"></i> Add Student
</button>


<button class="export-btn" onclick="exportBackup()">
    <i class="fa-solid fa-file-export btn-icon"></i> Export Student List
</button>

<button class="import-btn" onclick="document.getElementById('importFile').click()">
    <i class="fa-solid fa-file-import btn-icon"></i> Import Student List
</button>

<input type="file" id="importFile" accept=".json" hidden onchange="importBackup(event)">


<button onclick="countPresents()" class="total-present-btn">
    <i class="fa-solid fa-check-circle btn-icon"></i> Show Total Presents
</button>



</div>

    <table id="attendanceTable">
<tr>
    <th>S.No</th>
    <th>Roll No/Index</th>
    <th>Student Name</th>
    <th>Status</th>
    <th>Actions</th>
</tr>

    </table>

</div>


<footer class="main-footer">
    <div class="footer-content">
        <div class="footer-brand">
            <i class="fa-solid fa-graduation-cap"></i>
            <span>Attendance Manager 2026</span>
        </div>
        
        <div class="footer-info">
            <p><strong>Privacy First:</strong> Your data stays on your device using LocalStorage technology.</p>
        </div>

        <div class="footer-status">
            <span class="status-indicator"></span> System Online
        </div>
    </div>
</footer>

</div>
<script>
function countPresents() {
    const totalPresents = students.filter(student => student.status === "Present").length;
    alert(`Total students present: ${totalPresents}`);
    return totalPresents;
}
let sessionId = localStorage.getItem("currentSessionId");
if(!sessionId){
    alert("No session found! Go back to Dashboard.");
    window.location.href = "at.html";
}
let students = JSON.parse(localStorage.getItem("students_" + sessionId)) || [];

function saveData() {
    localStorage.setItem("students_" + sessionId, JSON.stringify(students));
}
// EXPORT BACKUP (JSON)
function exportBackup() {
    if (students.length === 0) {
        alert("No students to export!");
        return;
    }

    // Keep ONLY roll & name
    const cleanStudents = students.map(s => ({
        roll: s.roll,
        name: s.name
    }));

    const blob = new Blob(
        [JSON.stringify(cleanStudents, null, 2)],
        { type: "application/json" }
    );

    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `student_list_backup.json`;
    a.click();
    URL.revokeObjectURL(url);
}


// IMPORT BACKUP (JSON)
function importBackup(event) {
    const file = event.target.files[0];
    if (!file) return;

    if (!file.name.endsWith(".json")) {
        alert("Please select a valid JSON file!");
        return;
    }

    const reader = new FileReader();
    reader.onload = function (e) {
        try {
            const data = JSON.parse(e.target.result);

            if (!Array.isArray(data)) {
                alert("Invalid backup file!");
                return;
            }

            if (!confirm("This will replace the current student list. Continue?")) {
                return;
            }

            // Restore students with status reset
            students = data.map(s => ({
                roll: s.roll,
                name: s.name,
                status: "Not Marked"
            }));

            saveData();
            renderTable();
            alert("Student list imported successfully!");
        } catch {
            alert("Error reading backup file!");
        }
    };

    reader.readAsText(file);
    event.target.value = "";
}


function renderTable() {
    const table = document.getElementById("attendanceTable");
    // Hide all menus on render
document.querySelectorAll('.btn-group .context-menu').forEach(menu => {
    menu.style.display = 'none';
});

table.innerHTML = `
    <tr>
        <th>S.No</th>
        <th>Roll No/Index</th>
        <th>Student Name</th>
        <th>Status</th>
        <th>Actions</th>
    </tr>
`;


    students.forEach((student, index) => {
        const row = table.insertRow();

row.oncontextmenu = (e) => {
    e.preventDefault();
    openMenuAtCursor(e, index);
};


// Serial number (1, 2, 3...)
row.insertCell(0).innerText = index + 1;

// Roll & Name
row.insertCell(1).innerText = student.roll;
row.insertCell(2).innerText = student.name;


const statusCell = row.insertCell(3);

        statusCell.innerText = student.status;
        statusCell.className = student.status === "Present" ? "present" :
                               student.status === "Absent" ? "absent" : "";

const actionCell = row.insertCell(4);
actionCell.className = "action-cell";

actionCell.innerHTML = `
<div class="btn-group">
    <button class="present-btn" onclick="event.stopPropagation(); markAttendance(${index}, 'Present')">Present</button>
    <button class="absent-btn" onclick="event.stopPropagation(); markAttendance(${index}, 'Absent')">Absent</button>
    <button class="delete-btn" onclick="event.stopPropagation(); deleteStudent(${index})">Delete</button>
    
    <!-- 3 dots menu button -->
    <span class="menu-btn" onclick="event.stopPropagation(); toggleRowMenu(this)">â‹®</span>

    <!-- Context menu hidden by default -->
<div class="context-menu">
    <div onclick="renameStudent(${index})">
        <i class="fa-solid fa-pen"></i> Rename Student
    </div>

    <div onclick="changeRollNumber(${index})">
        <i class="fa-solid fa-hashtag"></i> Change Roll Number
    </div>

    <div onclick="duplicateStudent(${index})">
        <i class="fa-solid fa-copy"></i> Duplicate Student
    </div>

    <div onclick="changePosition(${index})">
        <i class="fa-solid fa-up-down-left-right"></i> Change Position
    </div>
</div>


</div>

`;



    });
}
/* Add these functions to your index.html <script> section */

// 1. Search Functionality
function duplicateStudent(index) {
    const student = students[index];

    // Create duplicate WITHOUT "Copy" text
    const duplicate = {
        roll: student.roll,
        name: student.name,
        status: "Not Marked"
    };

    // Insert duplicate just below original
    students.splice(index + 1, 0, duplicate);

    saveData();
    renderTable();
    closeAllMenus();
}


function filterStudents() {
    const query = document.getElementById('searchStudent').value.toLowerCase();
    const rows = document.querySelectorAll('#attendanceTable tr:not(:first-child)');
    
    rows.forEach(row => {
        const name = row.cells[2].innerText.toLowerCase();
        const roll = row.cells[1].innerText.toLowerCase();
        row.style.display = (name.includes(query) || roll.includes(query)) ? "" : "none";
    });
}

// 2. Bulk Actions
function markAll(status) {
    if(!confirm(`Mark everyone as ${status}?`)) return;
    students.forEach(s => s.status = status);
    saveData();
    renderTable();
}

// 3. Sorting Logic
function sortStudents() {
    students.sort((a, b) => a.name.localeCompare(b.name));
    saveData();
    renderTable();
}

function toggleRowMenu(button) {
    const btnGroup = button.closest('.btn-group');
    const menu = btnGroup.querySelector('.context-menu');

    // Hide all other menus
    document.querySelectorAll('.btn-group .context-menu').forEach(m => {
        if (m !== menu) m.style.display = 'none';
    });

    // Toggle menu display
    if (menu.style.display === 'block') {
        menu.style.display = 'none';
        return;
    }

    // Show temporarily to get height
    menu.style.display = 'block';

    const menuRect = menu.getBoundingClientRect();
    const buttonRect = button.getBoundingClientRect();
    const footer = document.querySelector('.footer');
    const footerRect = footer.getBoundingClientRect();

    // Default position: below
    menu.style.top = '100%';
    menu.style.bottom = 'auto';

    // If menu bottom goes below viewport or footer top, open upwards
    if (buttonRect.bottom + menuRect.height > footerRect.top) {
        menu.style.top = 'auto';
        menu.style.bottom = buttonRect.height + 'px'; // open above button
    }

    menu.style.right = '0'; // keep aligned right
}


// Close menus when clicking outside
document.addEventListener("click", () => {
    document.querySelectorAll(".btn-group .context-menu").forEach(menu => {
        menu.style.display = "none";
    });
});

// Rename student
function renameStudent(index) {
    const newName = prompt("Enter new student name:", students[index].name);
    if (newName && newName.trim() !== "") {
        students[index].name = newName.trim();
        saveData();      // save to localStorage
        renderTable();   // refresh table
    }
    closeAllMenus();
}

// Change roll number
function changeRollNumber(index) {
    const newRoll = prompt("Enter new roll number/index:", students[index].roll);
    if (newRoll && newRoll.trim() !== "") {
        students[index].roll = newRoll.trim();
        saveData();      // save to localStorage
        renderTable();   // refresh table
    }
    closeAllMenus();
}
function changePosition(currentIndex) {
    const totalStudents = students.length;
    const newPositionStr = prompt(`Enter new position (1 to ${totalStudents}):`);
    const newPosition = parseInt(newPositionStr);

    if ( newPosition < 1 || newPosition > totalStudents) {
        alert("Invalid position!");
        return;
    }

    // Move student to new position
    const student = students.splice(currentIndex, 1)[0]; // remove student
    students.splice(newPosition - 1, 0, student);        // insert at new position

    saveData();    // save changes
    renderTable(); // refresh table
    closeAllMenus();
}

// Helper: close all menus
function closeAllMenus() {
    document.querySelectorAll(".btn-group .context-menu").forEach(menu => {
        menu.style.display = "none";
    });
}

function addStudent() {
    const roll = document.getElementById("rollNo").value;
    const name = document.getElementById("studentName").value;

    if (!roll || !name) {
        alert("Enter roll number/index and student name!");
        return;
    }
    students.push({ roll, name, status: "Not Marked" });
    saveData();
    renderTable();

    document.getElementById("rollNo").value = "";
    document.getElementById("studentName").value = "";
}

function markAttendance(index, status) {
    students[index].status = status;
    saveData();
    renderTable();
}
function createNewSession() {
    let dateInput = document.getElementById("attendanceDate").value;
    if (!dateInput) {
        alert("Please select a date for the session.");
        return;
    }

    // Create unique session ID
    let sessionId = Date.now();
    localStorage.setItem("currentSessionId", sessionId);

    // Save the date for this session
    localStorage.setItem("attendanceDate_" + sessionId, dateInput);

    // Copy existing students if available
    let prevSessionId = localStorage.getItem("currentSessionId");
    let students = [];
    if (prevSessionId && localStorage.getItem("students_" + prevSessionId)) {
        students = JSON.parse(localStorage.getItem("students_" + prevSessionId));
    }
    localStorage.setItem("students_" + sessionId, JSON.stringify(students));

    renderTable(); // refresh the table for this new session
}


function deleteStudent(index) {
    if(confirm("Delete this student?")){
        students.splice(index,1);
        saveData();
        renderTable();
    }
}

renderTable();
</script>

</body>
</html>







